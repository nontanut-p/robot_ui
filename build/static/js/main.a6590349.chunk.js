(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t){},120:function(e,t){},129:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(34),r=s.n(a),l=(s(78),s(2)),o=s(36),i=s(3),d=s(0);function b(e){e.fixed;var t=n.a.useState(!1),s=Object(l.a)(t,2),c=s[0],a=s[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("nav",{className:"debug-screens relative flex flex-wrap items-center justify-between px-2 py-1 bg-blue-800 mb-3 border-2 border-blue-900",children:Object(d.jsxs)("div",{className:"container px-4 mx-auto flex flex-wrap items-center justify-between ",children:[Object(d.jsxs)("div",{className:"w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start ",children:[Object(d.jsxs)(o.b,{className:"text-3xl font-bold leading-relaxed inline-block mr-4 py-0 whitespace-nowrap uppercase text-white hover: transform hover:-translate-y-1 hover:scale-110",to:"/",children:[Object(d.jsx)("i",{class:"fas fa-robot"})," ROBOT"]}),Object(d.jsx)("button",{className:"text-white cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none",type:"button",onClick:function(){return a(!c)},children:Object(d.jsx)("i",{className:"fas fa-bars"})})]}),Object(d.jsx)("div",{className:"lg:flex flex-grow items-center"+(c?" flex":" hidden"),id:"example-navbar-danger",children:Object(d.jsxs)("ul",{className:"flex flex-col lg:flex-row list-none lg:ml-auto",children:[Object(d.jsx)("li",{className:"nav-item ",children:Object(d.jsxs)("a",{className:"hover: transform hover:-translate-y-1 hover:scale-110 px-3 py-2 flex items-center text-md uppercase font-bold leading-snug text-white hover:opacity-75",href:"#pablo",children:[Object(d.jsx)("i",{className:"far fa-share-square text-md leading-lg text-white opacity-75 "}),Object(d.jsx)("span",{className:"ml-3",children:"LOG OUT"})]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)("a",{className:" hover: transform hover:-translate-y-1 hover:scale-110 px-3 py-2 flex items-center text-md uppercase font-bold leading-snug text-white hover:opacity-75",href:"#pablo",children:[Object(d.jsx)("i",{className:"fas fa-download text-md leading-lg text-white opacity-75"}),Object(d.jsx)("span",{className:"ml-2",children:"SAVE"})]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)("a",{className:"hover: transform hover:-translate-y-1 hover:scale-110 px-3 py-2 flex items-center text-md uppercase font-bold leading-snug text-white hover:opacity-75",href:"#pablo",children:[Object(d.jsx)("i",{className:"fas fa-print text-md leading-lg text-white opacity-75"}),Object(d.jsx)("span",{className:"ml-2",children:"PRINT"})]})})]})})]})})})}var j=function(e){var t=e.video;return console.log(t.video,"from camera"),Object(d.jsxs)("div",{className:" border-2 max-w-xl mx-auto bg-white rounded-xl shadow-md overflow-hidden xl:max-w-2xl bg-gray-100",children:[Object(d.jsx)("div",{className:"text-center pl-2 pt-2 uppercase tracking-tight text-lg text-blue-700 font-semibold ",children:"CAMERA 1"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"px-3 py-3 ",children:Object(d.jsx)("div",{className:" ",children:Object(d.jsx)("img",{className:"w-400",src:"data:image/jpeg;base64,".concat(t.video)})})}),Object(d.jsxs)("div",{className:"px-2 grid grid-cols-4 gap-4 pb-2",children:[Object(d.jsxs)("button",{className:"hover: transform hover:-translate-y-1 hover:scale-110  hover:text-black text-white font-semibold rounded-full bg-green-400",children:[" ","CAM1"]}),Object(d.jsx)("button",{className:"hover: transform hover:-translate-y-1 hover:scale-110  hover:text-black  text-white font-semibold rounded-full bg-green-400",children:"CAM2"}),Object(d.jsx)("button",{className:"hover: transform hover:-translate-y-1 hover:scale-110 hover:text-black   text-white font-semibold rounded-full bg-green-400",children:"CAM3"}),Object(d.jsxs)("button",{className:"hover: transform hover:-translate-y-1 hover:scale-110  hover:text-black text-white font-semibold rounded-full bg-green-400",children:["OFF"," "]})]})]})]})},x=s(131),h=s(134),m=s(132),u=s(133),g=s(14),p=s.n(g);s(87);var O=function(e){e.long;var t=e.lat,s=p.a.Icon.extend({options:{}}),c=new s({iconUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|abcdef&chf=a,s,ee00FFFF"}),n=(new s({iconUrl:"https://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|2ecc71&chf=a,s,ee00FFFF"}),c),a=[14.078291798078023,100.60221644781316];return a[0]=t,Object(d.jsxs)(x.a,{className:"rounded-xl border-2 ",center:[14.078291798078023,100.60221644781316],zoom:100,scrollWheelZoom:!0,children:[Object(d.jsx)(h.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(d.jsx)(m.a,{position:a,icon:n,children:Object(d.jsxs)(u.a,{children:["A pretty CSS3 popup. ",Object(d.jsx)("br",{})," Easily customizable."]})})]})},f=s(72);var v=function(e){var t=e.text;return Object(d.jsx)("div",{className:" border my-0.5 text-gray-600 border-gray-400 rounded-xl  max-w-xl mx-auto bg-whiteshadow-md overflow-hidden xl:max-w-2xl bg-yellow-50  ",children:Object(d.jsxs)("p",{className:"font-light ml-4",children:[" ",Object(d.jsx)("span",{className:"text-red-400 ",children:"Robot:"})," ",t]})})},y=s(16),N=s.n(y),w=N()();var _=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(null),r=Object(l.a)(a,2),o=r[0],i=r[1],b=Object(c.useState)(""),j=Object(l.a)(b,2),x=j[0],h=j[1];return Object(d.jsx)("div",{className:"container",children:o?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{}),Object(d.jsx)("input",{type:"text",value:s,onChange:function(e){n(e.target.value)}}),Object(d.jsx)("button",{onClick:function(){w.emit("message","".concat((new Date).toLocaleString()," : ").concat(s)),n("")},children:"SEND"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{for:"display-name",children:"Display Name"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",value:x,onChange:function(e){h(e.target.value)}}),Object(d.jsx)("button",{onClick:function(){i(x)},children:"SUBMIT"})]})})},S=N()();var k=function(){var e=Object(c.useState)(["1","2","3"]),t=Object(l.a)(e,2),s=t[0],n=t[1];return Object(c.useEffect)((function(){S.on("test",(function(e){console.log(e),n((function(t){return[].concat(Object(f.a)(t),[e])}))}))}),[]),Object(d.jsxs)("div",{className:"mt-5  h-80 border-2 max-w-xl mx-auto max-h-80 bg-white w-full rounded-xl shadow-md xl:max-w-2xl h-2/3 bg-gray-100",children:[Object(d.jsx)("div",{className:"text-center pl-2 pt-2 uppercase tracking-tight text-lg text-blue-700 font-semibold ",children:"ROBOT MESSAGE"}),Object(d.jsx)("div",{className:"h-5/6 overflow-y-auto mb-10",children:Object(d.jsx)("ul",{children:s.map((function(e){return Object(d.jsx)(v,{text:e})}))})})]})};var E=function(e){var t=e.long,s=e.lat,c=e.acc,n=e.velo;return Object(d.jsxs)("div",{className:"mt-5  border-2 max-w-xl mx-auto bg-white w-full rounded-xl shadow-md xl:max-w-2xl h-2/3 bg-gray-100  overflow-y-auto ",children:[Object(d.jsx)("div",{className:"text-center pl-2 pt-2 uppercase tracking-tight text-lg text-blue-700 font-semibold ",children:"Driver AND GNSS"}),Object(d.jsxs)("div",{className:" grid grid-cols-2  sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 ",children:[Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["LAT : ",Object(d.jsxs)("span",{className:"text-gray-600 font-light",children:[" ",s]})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["LON : ",Object(d.jsxs)("span",{className:"text-gray-600 font-light",children:[" ",t]})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["ACC :",Object(d.jsxs)("span",{className:"text-gray-600 font-light",children:[" ",c," M"]})]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["RTK :",Object(d.jsx)("span",{className:"text-green-400",children:"   OK"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["VEL :",Object(d.jsxs)("span",{className:"text-gray-600 font-light",children:[" ",n," m/s"]})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 1 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 1200"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 2:",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 1200"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 3 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 1200"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 4 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 1200"}),"  "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 5 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 300"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 6 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 300"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 7 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 300"})," "]})}),Object(d.jsx)("div",{className:"border-2 bg-blue-100 pl-3 rounded-md mx-2 my-2 text-blue-600 font-semibold ",children:Object(d.jsxs)("p",{children:["DRIVE 8 :",Object(d.jsx)("span",{className:"text-gray-600 font-light",children:" 300"})," "]})})]})]})},R=N()();var C=function(e){var t=Object(c.useState)(""),s=Object(l.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),i=o[0],b=o[1],x=Object(c.useState)(""),h=Object(l.a)(x,2),m=h[0],u=h[1],g=Object(c.useState)(""),p=Object(l.a)(g,2),f=p[0],v=p[1],y=Object(c.useState)(["ss","hlkhl"]),N=Object(l.a)(y,2),w=N[0];return N[1],Object(c.useEffect)((function(){R.on("lat",(function(e){a(e)})),R.on("long",(function(e){b(e)})),R.on("acc",(function(e){u(e)})),R.on("velo",(function(e){v(e)}))}),[n]),Object(d.jsxs)("div",{className:"2xl:px-20 grid grid-cols-1 md:grid-cols-1 md:max-h-xl  mt-5 gap-1 lg:grid-cols-2",children:[Object(d.jsx)(j,{video:e}),Object(d.jsx)(O,{lat:n,long:i,acc:m,velo:f}),Object(d.jsx)(k,{text:w}),Object(d.jsx)(E,{lat:n,long:i,acc:m,velo:f})]})},I=s(33),U=s.n(I);var T=function(e){var t=(new Date).toLocaleTimeString();return console.log("ramUse",e.hardwareStatus[0].ramUsage,"cpuUsage",e.hardwareStatus[0].cpuUsage,"battery",e.hardwareStatus[0].battery,"temp",e.hardwareStatus[0].temp,"hardware",e.connectStatus),Object(d.jsxs)("div",{className:"border-2 max-w-xl mx-auto bg-white rounded-xl shadow-md overflow-hidden xl:max-w-2xl",children:[Object(d.jsxs)("div",{className:"text-center pl-2 pt-2 uppercase tracking-tight text-md text-blue-700 font-semibold",children:["CONNECTION STATUS : ",Object(d.jsxs)("span",{class:1==e.connectStatus?"text-green-500 ":"text-red-500 ",children:[" ",1==e.connectStatus?"Online":"Offline"," "]}),"    TIME : ",Object(d.jsxs)("span",{className:"text-green-500",children:[" ",t]})]}),Object(d.jsxs)("div",{className:"grid grid-cols-2 pb-3",children:[Object(d.jsx)("div",{className:"pl-5 pt-2 text-md text-blue-700 font-light ",children:Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-trailer"})," ROBOT MODE :"," ",Object(d.jsx)("span",{class:"text-green-400 ",children:" Auto "})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-bolt"})," DRIVER :"," ",Object(d.jsx)("span",{class:"text-green-400 ",children:"test"})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-video"})," CAMERA :"," ",Object(d.jsx)("span",{class:"text-red-400 ",children:" NOT WORKING "})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-tint"})," SPRAY :"," ",Object(d.jsx)("span",{class:"text-green-400 ",children:" WORKING "})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-gamepad"})," JOYSTICK :"," ",Object(d.jsx)("span",{class:"text-red-400 ",children:" NOT WORKING "})]})]})}),Object(d.jsx)("div",{className:"pt-2 text-md text-blue-700 font-light pl-10 ",children:Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-microchip"})," CPU USAGE :"," ",Object(d.jsxs)("span",{class:"text-red-400 ",children:[" ",e.hardwareStatus[0].cpuUsage,"% "]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-memory"})," RAM USAGE :"," ",Object(d.jsxs)("span",{class:"text-red-400 ",children:[" ",e.hardwareStatus[0].ramUsage,"MB "]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-car-battery"})," BATTERY :"," ",Object(d.jsxs)("span",{class:"text-green-400 ",children:[" ",e.hardwareStatus[0].battery,"% "]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-temperature-low"})," TEMPERATURE :"," ",Object(d.jsxs)("span",{class:"text-green-400 ",children:[" ",e.hardwareStatus[0].temp,"\xb0C "]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("i",{class:"fas fa-tint"})," SPRAY SHOTS :"," ",Object(d.jsx)("span",{class:"text-red-400 ",children:" 321/10000 "})]})]})})]})]})};var A=function(){return Object(d.jsx)("div",{className:"max-w-full bg-blue-800 h-20 border-2 border-gray-800",children:Object(d.jsx)("p",{className:"font-semibold text-center mt-3 text-2xl text-gray-200",children:" FOOTER "})})},D=(s(128),{cpuUsage:0,ramUsage:0,battery:0,temp:0}),F=[D,!1,0],M=null;new Promise((function(e,t){(M=N.a.connect("https://weather.mtec.or.th")).on("connect",(function(){console.log("socket connected")})),M.on("request_login",(function(){M.emit("login",{email:"pat",pass:"agrimtec"})})),M.on("auth",(function(e){M.emit("get_robot_list")})),M.on("unauth",(function(e){console.warn("cannot log in")})),M.on("get_robot_list",(function(e){e.peer||(console.log("undefine robot not peer"),console.log("socket ID",M.id)),e.length>0&&!P.peer?(P.connect(e[0].socket_id),F[1]=!0):(console.log("Error Here"),F[1]=!1)})),M.on("message",(function(e){var t=e.from,s=e.message;"offer"===s.type?(console.log("got offer"),P.createPeerConnection(t,e.auth_type,s)):s.candidate?P.add_candidtates(s):console.warn("unknown message")})),M.on("robot_leave",(function(e){console.log("robot_leave : "+e),P.socket_id==e?P.destroy():console.error("robot_leave : socket_id not match : "+P.socket_id+" / "+e)})),M.on("reject_call",(function(e){console.warn("reject_call")})),M.on("alert",(function(e){console.warn("alert : "+e),alert(e)}))}));var P={pcConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},socket_id:null,candidates:[],peer:null,auth_type:null,b_connected:!1,timer_check_ready:null,connect:function(e){console.log("connect robot"),this.socket_id?console.warn("robot already exists"):(this.candidates=[],this.socket_id=e,M.emit("message",{to:e,message:{type:"call"}}))},disconnect:function(){console.log("disconnect robot"),this.peer&&this.send_peer({event:"bye"}),this.destroy()},destroy:function(){var e=this;this.socket_id&&(this.socket_id=null,setTimeout((function(){e.peer&&(e.peer.destroy(),e.peer=null)}),100),this.timer_check_ready&&(clearInterval(this.timer_check_ready),this.timer_check_ready=null))},send_peer:function(e){console.log("send_peer",e),this.peer.send(JSON.stringify(e))},createPeerConnection:function(e,t,s){if(this.socket_id){var c=this;console.log("createPeerConnection"),c.socket_id=e,c.auth_type=t;var n=this.peer=new U.a({initiator:!1,config:this.pcConfig});n.on("error",(function(e){console.error(e)})),n.on("connect",(function(){console.log("peer connected"),F[1]=!0,c.b_connected=!0,c.timer_check_ready||(c.timer_check_ready=setInterval((function(){c.send_peer({event:"ready"})}),1e3))})),n.on("close",(function(){console.log("peer closed"),c.b_connected=!1,c.destroy()})),n.on("signal",(function(e){console.log("signal : "+JSON.stringify(e)),c.sendMessage(e)})),n.on("data",(function(e){console.log("got data : ",e);try{e=JSON.parse(e)}catch(t){return void console.warn("cannot parse data")}"ready"==e.event?(console.log("robot ready"),c.timer_check_ready&&(clearInterval(c.timer_check_ready),c.timer_check_ready=null),setInterval((function(){return c.send_peer({event:"get_pc_status"})}),5e3),setInterval((function(){return c.send_peer({event:"stream"})}),150)):"get_pc_status"==e.event?(D.cpuUsage=e.status.cpuUsage,D.ramUsage=e.status.ramUsage,D.battery=e.status.battery,D.temp=e.status.temp):"stream"==e.event?F[2]=e.base64:"get_path_list"==e.event?(console.log("got path list"),e.err?console.error(e.err):e.paths.length>0&&(console.log("data.path",e.paths),c.send_peer({event:"get_path",name:e.paths[0]}))):"get_path"==e.event&&(console.log("got path"),e.err&&console.error(e.err))})),this.candidates.forEach((function(e){n.signal(e)})),n.signal(s)}else console.error("robot not connect")},sendMessage:function(e){var t={to:this.socket_id,message:e};try{console.log("send message : "+JSON.stringify(t))}catch(s){console.log("send message : [Circular]")}M.emit("message",t)},add_candidtates:function(e){console.log("got candidate"),this.socket_id?this.peer?this.peer.signal(e):this.candidates.push(e):console.error("no robot")}},V=F;var B=function(){var e=Object(c.useState)([{cpuUsage:0,ramUsage:0,battery:0,temp:0}]),t=Object(l.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!1),r=Object(l.a)(a,2),j=r[0],x=r[1];return Object(c.useEffect)((function(){setInterval((function(){n([{cpuUsage:V[0].cpuUsage,ramUsage:V[0].ramUsage,battery:V[0].battery,temp:V[0].temp}]),x(V[1])}),50)}),0),Object(d.jsx)(o.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsxs)(i.a,{exact:!0,path:"/",children:[" ",Object(d.jsx)("div",{children:Object(d.jsx)(b,{})}),Object(d.jsx)(T,{hardwareStatus:s,connectStatus:j}),Object(d.jsx)(C,{video:V[2]}),Object(d.jsx)(A,{})]}),Object(d.jsx)(i.a,{exact:!0,path:"/map",children:Object(d.jsx)(O,{})}),Object(d.jsx)(i.a,{exact:!0,path:"/test",children:Object(d.jsx)(_,{})})]})})},G=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,135)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(B,{}),document.getElementById("root")),G()},78:function(e,t,s){}},[[129,1,2]]]);
//# sourceMappingURL=main.a6590349.chunk.js.map